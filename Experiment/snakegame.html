<!DOCTYPE html>
<html>
    <head>
        <title>Snake Game</title>


    </head>
    <body>

        <canvas id="gameCanvas" width="400" height="400"></canvas>

        <style>
            #snakeboard {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
        </style>
    </body>
    <script>
        const board_border = 'black';
        const  board_background = 'white';
        const snake_col = 'lightblue';
        const snake_border = 'darkblue';

        let snake = [ 
            {x: 200, y: 200}, 
            {x: 190, y: 200}, 
            {x: 180, y: 200}, 
            {x: 170, y: 200}, 
            {x: 160, y: 200}
        ]

        let dx = 10;
        let dy = 0;

        // Get the Canvas Element
        const snakeboard = document.getElementById("snakeboard");
        // Return a two dimentional drawing context
        const snakebaord_ctx = gameCanvas.getContext("2d");
        // Start Game
        main();

        document.addEventListener("keydown", change_direction);

        // main function called repeatedly to keep the game running
        function main(){
                if(has_game_ended()) return;

                change_direction = false;
                setTimeout(function onTick() {
                clearCanvas();
                move_snake();
                drawSnake();
                // call main again
                main();
            }, 100)
        }

        // draw a border around the canvas
        function clearCanvas() {
            snakeboard_ctx.fillStyle = board_background;
            snakeboard_ctx.strokestyle = board_border;
            snakeboard_ctx.fillRect(0, 0, snakeboard.width, snakeboard.heigth);
            snakeboard_ctx.strokeRect(0, 0, snakeboard.width, snakeboard.height);
        }

        /* Function that prints the parts */
        function drawSnake(){
            snake.forEach(drawSnakePart);
        }

        // Draw one snake part
        function drawSnakePart(snakePart){
            snakeboard_ctx.fillStyle = snake_col;
            snakeboard_ctx.strokestyle = snake_border;
            snakeboard_ctx.fillRect(snakePart.x, snakePart.y, 10, 10);
            snakeboard_ctx.strokeRect(snakePart.x, snakePart.y, 10, 10);
        }

        function has_game_ended(){
            for (let i = 4; i < snake.length; i++) {
                if (snake[i].x === snake[0].x && snake[i].y === snake[0].y) return true
            }
            const hitLeftWall = snake[0].x < 0;
            const hitRightWall = snake[0].x > snakeboard.width - 10;
            const hitTopWall = snake[0].y < 0;
            const hitBottomWall = snake[0].y > snakeboard.height - 10;
            return hitLeftWall || hitRightWall || hitTopWall || hitBottomWall
        }

        function change_direction(event)
        {
            const LEFT_KEY = 37;
            const RIGHT_KEY = 39;
            const UP_KEY = 38;
            const DOWN_KEY = 40;

            const keyPressed = event.keyCode;
            const goingUp = dy === - 10;
            const goingDown = dy === 10;
            const goingRight = dx === 10;
            const goingLeft = dx === -10;

                if(keyPressed === LEFT_KEY && !goingRight)
                {
                    dx = -10;
                    dy = 0;
                }

                if(keyPressed === UP_KEY && !goingDown)
                {
                    dx = 0;
                    dy = -10;
                }

                if (keyPressed === RIGHT_KEY && !goingLeft)
                {
                    dx = 10;
                    dy = 0;
                }

                if (keyPressed === DOWN_KEY && !goingUp)
                {
                    dx = 0;
                    dy = 10;
                }
            
        }

         // Horizontal & Vertical Movement of Snake
        function move_snake(){
            const head = {x: snake[0].x + dx, y: snake[0].dy};
            // snake.unshift adds the new head to the beginning of snake
            snake.unshift(head);
            // snake.pop removes the last element of the snake making all the other snake parts shift into place
             snake.pop();
        }
    </script>
</html>



